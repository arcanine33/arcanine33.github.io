---
title: "[Flutter]fastlane êµ¬ì¶•í•˜ê¸°"
categories: flutter
toc: true
toc_label: "ëª©ì°¨"
toc_icon: "cog"
---

# ì„œë¡ 

ìµœê·¼ì—(ë¼ê³  ì“°ê³  í•œë‹¬ ì „) ìë™ ë°°í¬ë¼ëŠ” ê²ƒì´ ëŒ€ì²´ ë¬´ì—‡ì¸ê°€... í•´ì„œ í•œë²ˆ í•´ë´ì•¼ê² ë‹¤! ë¼ëŠ” ë§ˆìŒì´ ë“¤ì—ˆë‹¤. ìë™ë°°í¬ìë™ë°°í¬... ê·¸ê²Œ ëŒ€ì²´ ë­ì§€? 

ë‚´ê°€ ë‚´ë¦° ì •ì˜ëŠ” ì•±ì„ ê° ìŠ¤í† ì–´ì— ë°°í¬í•˜ê¸° ìœ„í•´ì„ , ì¼ë ¨ì˜ ê³¼ì •ë“¤ì´ ìˆëŠ”ë° ê·¸ ê³¼ì •ë“¤ì„ ëª…ë ¹ì–´ í•œ ë²ˆìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤. í•œë²ˆ êµ¬ì¶•í•´ë†“ê¸°ë§Œ í•˜ë©´, ì•±ì„ ë°°í¬í•˜ê¸° ìœ„í•´ ê¸°ë‹¤ë¦¬ë˜ ì‹œê°„ì„ ì•„ë¼ê³  ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‹œê°„ì„ í™œìš© í•  ìˆ˜ ìˆë‹¤!

ê·¸ë˜ì„œ ì²˜ìŒì—ëŠ” ì„œë²„ì—ì„œ ì‚¬ìš©í•˜ëŠ” githubActionì„ í™œìš©í•´ì„œ í…ŒìŠ¤íŠ¸ ì•±ì„ ë°°í¬í•˜ê³  ìˆëŠ” firebase distributeì— ë°°í¬í•  ìˆ˜ ìˆë„ë¡ êµ¬ì¶•í•˜ë ¤ê³  ì‹œë„ í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë§ì´ ì—†ëŠ” ìë£Œì™€ í•œë²ˆ ì‹¤í–‰ ì‹œí‚¬ ë•Œë§ˆë‹¤ 10ë¶„ì”© ë„˜ì–´ê°€ëŠ” ì‹¤í–‰ì‹œê°„ì´ ì˜¤íˆë ¤ ë¡œì»¬ì—ì„œ í›„ë‹¤ë‹¥ ë§Œë“¤ì–´ì„œ ì—…ë¡œë“œí•˜ë©´ í›¨ì”¬ ì‹œê°„ë„ ì ê²Œ ê±¸ë¦¬ê³ , í¸í–ˆê¸° ë•Œë¬¸ì— ì˜ë„ì™€ ë§ì§€ ì•ŠëŠ”ë‹¤ê³  ìƒê°í–ˆë‹¤. íŠ¹íˆ apkë¥¼ ë§Œë“¤ì–´ì„œ firebase distributeì— ì˜¬ë¦¬ëŠ” ê³¼ì •ì—ì„œ ìê¾¸ apk ê²½ë¡œë¥¼ ëª»ì°¾ì•„ì„œğŸ˜¢Â êµ‰ì¥íˆ ì§œì¦ì´ ë‚¬ë‹¤. ê¼­ ì„œë²„ì™€ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì“¸ í•„ìš”ëŠ” ì—†ë‹¤ê³  ìƒê°í•˜ê³  CDêµ¬ì¶• ë°©ë²•ì„ ì°¾ì•„ë³´ë‹ˆ fastlaneì´ í¸í•˜ê³  ì‰½ë‹¤ë”ë¼~! ê·¸ë˜ì„œ fastlaneìœ¼ë¡œ CD êµ¬ì¶•í•œ ê²½í—˜ì„ ì´ì•¼ê¸°í•´ë³´ë ¤ê³  í•œë‹¤~

# fastlane êµ¬ì¶•í•˜ê¸°

1. firebase CLI ì„¤ì¹˜

ì—¬ê¸°ì„  firebasê°€ ë‹¤ ì„¸íŒ… ë˜ì–´ ìˆë‹¤ëŠ” ê±¸ ê°€ì •í•˜ê³ , ì´í›„ì— í•´ì•¼í•  í–‰ë™ë§Œ ì‘ì„±í•˜ê² ë‹¤! ë¨¼ì € [firebase CLI](https://firebase.google.com/docs/cli?hl=ko#mac-linux-auto-script)ë¥¼ ì„¤ì¹˜í•œë‹¤.

```java
//firebase cli ì„¤ì¹˜ ëª…ë ¹ì–´
$ curl -sL https://firebase.tools | bash
//firebase ë¡œê·¸ì¸
$ firebase login
//firebase cli ì¸ì¦
$ firebase login:ci
```

1. [fastlane](https://docs.fastlane.tools/getting-started/android/setup/)ì„ ì„¤ì¹˜í•œë‹¤
2. [IOS fastlane](https://firebase.google.com/docs/app-distribution/ios/distribute-fastlane?hl=ko) êµ¬ì¶•
    1. í„°ë¯¸ë„ì—ì„œ flutter í”„ë¡œì íŠ¸ í´ë”ì˜ ios í´ë”ì— ì§„ì…í•œë‹¤. 
    2. fastlaneì„ ì´ˆê¸°í™” í•œë‹¤ 
    
    ```java
    $ fastlane init
    ```
    
    c. firebase distributeì— ì˜¬ë¦´ ëª…ë ¹ì–´ë¥¼ Fastfileì— ì‘ì„±í•œë‹¤.
    
    ```java
    default_platform(:ios)
    buildDir = "./build"
    
    desc "Firebase QAìš© BETA ë¹Œë“œ "
    lane :iosDistribute do
    
      # ì½”ì½”ì•„íŒŸ ì—…ë°ì´íŠ¸
      cocoapods(
        repo_update: true,
        use_bundle_exec: false
      )
    
      build_app(
        scheme: "dev",
        output_directory: buildDir,
        export_method:"ad-hoc",
        # uncomment this for detailed build error
        #xcargs: "-verbose"
      )
    
      firebase_app_distribution(
          app: "firebase ì•± ì„¸íŒ…ì— ìˆëŠ” ios ì•± app idë¥¼ ì‘ì„±",
    			//í…ŒìŠ¤í„°ë„ ê¸°ë³¸ì ìœ¼ë¡œ ì„¸íŒ…í•˜ê³  ì‹¶ë‹¤ë©´ firebase distributeì—ì„œ í…ŒìŠ¤í„° ê·¸ë£¹ì„ ë§Œë“¤ê±°ë‚˜ í•œëª…ì”© ì¶”ê°€ 
          groups: "iosTester",
          ipa_path: buildDir + "/Runner.ipa",
    			//ì´ íŒŒì¼ì—ì„œ ë¦´ë¦¬ì¦ˆë…¸íŠ¸ë¥¼ ì‘ì„±í•  ê²½ë¡œ ë° txt
          release_notes_file: "../release_notes.txt"
      )
    	end
    end
    ```
    
    d. í„°ë¯¸ë„ì„ ios í´ë”ì— ìœ„ì¹˜ ì‹œí‚¨ í›„ ì‹¤í–‰ ëª…ë ¹ì–´ ì‘ì„±í•˜ë©´ ë!
    
    ```java
    $ fastlane iosDistribute
    ```
    
3. [android fastlane](https://firebase.google.com/docs/app-distribution/android/distribute-fastlane?hl=ko) êµ¬ì¶•
    1. í„°ë¯¸ë„ì—ì„œ flutter í”„ë¡œì íŠ¸ í´ë”ì˜ android í´ë”ì— ì§„ì…
    2. fastlaneì„ ì´ˆê¸°í™” í•œë‹¤
    
    ```java
    $ fastlane init
    ```
    
    c. firebase distributeì— ì˜¬ë¦´ ëª…ë ¹ì–´ ì‘ì„±!
    
    ```java
    default_platform(:android)
    
    platform :android do
      desc "Submit a new DevRelease Build to Crashlytics Beta"
      lane :androidDistribute do
    		//flavor ì„¤ì • ê°’ì— ë”°ë¼ ì‹¤í–‰ë˜ëŠ” gradle ë‹¤ë¥´ë‹¤ 
        gradle(task: "clean assembleDevRelease")
        firebase_app_distribution(
                app: "firebase disrtibuteì— ì˜¬ë¼ê°ˆ android app id",
                groups: 'androidTester',
                apk_path: '../build/app/outputs/flutter-apk/app-dev-release.apk',
                release_notes_file: "../release_notes.txt"
        )
    
      end
    end
    ```
    
    d. í„°ë¯¸ë„ì„ android í´ë”ì— ìœ„ì¹˜ ì‹œí‚¨ í›„ ì‹¤í–‰ ëª…ë ¹ì–´!
    
    ```java
    $ fastlane androidDistribute
    ```
    
    # í›„ê¸°
    
    githubActionìœ¼ë¡œ ë™ë™ ê±°ë¦¬ë‹¤ê°€ fastlaneìœ¼ë¡œ ë§Œë“¤ì–´ ë†“ìœ¼ë‹ˆ ê¸ˆë°© ë§Œë“¤ì–´ë‚´ì„œ ì†”ì§íˆ ì¢€ í—ˆíƒˆí–ˆë‹¤. ê·¸ë˜ë„ ì˜ ë™ì‘í•˜ê³  ì‹¤ì œë¡œ ë°°í¬í•˜ëŠ”ë° ì‹œê°„ì´ ë§ì´ ì¤„ì–´ì„œ(iosê°€ ë°°í¬í•˜ëŠ”ê²Œ ì˜ ê·€ì°®ì•˜ëŠ”ë°, ì •ë§ ê°„í¸í•´ì¡Œë‹¤!) ë³´ëŒë„ ìˆë‹¤. ì•„ì§ ì‹¤ë°°í¬ëŠ” ìˆ˜ë™ë°°í¬ë¡œ ì§„í–‰í•˜ëŠ”ë°, ì´ìª½ë„ êµ¬ì¶• í•´ë†“ìœ¼ë©´ ë§ì´ í¸í•´ì§€ê² ì§€!
    
    +) ios í”„ë¡œë¹„ì €ë‹ í”„ë¡œí•„ì— ìƒˆë¡œìš´ ios ê¸°ê¸°ë¥¼ ë“±ë¡í•˜ëŠ” ì´ìŠˆê°€ ìˆì—ˆë‹¤. ê·¸ëƒ¥ ê°€ë³ê²Œ(?) apple developerì— ê¸°ê¸°ë¥¼ ë“±ë¡í•˜ê³  ë°°í¬ë¥¼ í–ˆëŠ”ë°, ìƒˆë¡œ ë“±ë¡í•œ ë¶„ ê¸°ê¸°ì— ì„¤ì¹˜ê°€ ì•ˆëë‹¤!! ê³„ì† `ê¸°ê¸° ë“±ë¡ì´ ë¨` ìƒíƒœë§Œ ëœ¨ê³ , ê°œë°œìê°€ ì—…ë°ì´íŠ¸ë¥¼ í•´ì£¼ë©´ ë‹¤ìš´ë°›ì„ ìˆ˜ ìˆë‹¤ê³ ë§Œ ë– ì„œ ì´ê²Œ ëŒ€ì²´ ë­”ê°€ ê²€ìƒ‰ì„ í•´ë„ ëšœë ·í•œ ë‹µì´ ì•ˆë‚˜ì™”ë‹¤ ğŸ˜¡
    
    í•´ê²° ë°©ë²•ì€ ê¸°ì¡´ì— ë°›ì•„ì ¸ ìˆë˜ í”„ë¡œë¹„ì €ë‹ í”„ë¡œí•„ì„ ì§€ìš°ê³  ë‹¤ì‹œ ë§Œë“¤ë©´ ë˜ëŠ” ê²ƒì´ì—ˆë‹¤.
    
    xcode ì—ì„œ runner - signing&capabilities -  `automatically manage signing` ì„ ì „ë¶€ ë„ê³  `/Users/user ì´ë¦„/Library/MobileDevice/Provisioning Profiles` ì—ì„œ ìƒì„±ëœ `.mobileprovision` ì„ ì „ë¶€ ì‚­ì œí•œë‹¤. ê·¸ë¦¬ê³  ë‹¤ì‹œ xcodeë¡œ ëŒì•„ì™€ì„œ `automatically manage signing` ë¥¼ ë‹¤ì‹œ ì¼œì£¼ë©´ apple developerì— ë“±ë¡ëœ ê¸°ê¸°ë“¤ì„ ë‹¤ì‹œ ë°›ì•„ì™€ì„œ ìƒˆë¡œìš´ íŒŒì¼ì„ ë§Œë“ ë‹¤! ì´ ìƒíƒœì—ì„œ ë‹¤ì‹œ ios ì•±ì„ ë°°í¬í•´ì£¼ë©´, ì•±ì´ ë‹¤ìš´ ë°›ì•„ì§„ë‹¤!
    
    ë³„ê±° ì•„ë‹Œê±° ì˜€ì§€ë§Œ, ios í™˜ê²½ì— ëŒ€í•œ ê°œë…ì´ ë¶€ì¡±í•˜ë‹¤ë³´ë‹ˆ ë­ê°€ ë¬¸ì œì¸ì§€ í¬ì°©í•˜ëŠ”ê²Œ í•­ìƒ ì–´ë µê²Œ ëŠê»´ì§„ë‹¤ğŸ˜¢Â ê·¸ë˜ë„ ì¢‹ì€ ê²½í—˜ì´ì—ˆë‹¤!